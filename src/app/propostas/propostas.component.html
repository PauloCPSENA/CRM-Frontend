<h2>Cadastro de Proposta</h2>

<form [formGroup]="propostaForm" (ngSubmit)="salvarProposta()" class="formulario-proposta">
  <div class="form-grid">
    <!-- Coluna Esquerda -->
    <div class="coluna-esquerda">
      <fieldset>
        <legend>Identificação</legend>

        <label for="cliente">Cliente:</label>
        <select id="cliente" formControlName="clienteId">
          <option [value]="0" disabled>Selecione um cliente</option>
          <option *ngFor="let cliente of clientes" [value]="cliente.id">
            {{ cliente.nome }}
          </option>
        </select>

        <label for="clienteId">ID do Cliente:</label>
        <input id="clienteId" type="number" [value]="propostaForm.get('clienteId')?.value" disabled />

        <label for="modelo">Modelo de Proposta:</label>
        <select id="modelo" formControlName="modeloPropostaId">
          <option *ngFor="let modelo of modelos" [value]="modelo.id">
            {{ modelo.nome }}
          </option>
        </select>

        <label for="modeloId">ID do Modelo:</label>
        <input id="modeloId" type="number" [value]="propostaForm.get('modeloPropostaId')?.value" disabled />

        <label for="titulo">Título:</label>
        <input id="titulo" type="text" formControlName="titulo" />
      </fieldset>

      <fieldset>
        <legend>Execução e Pagamento</legend>

        <label for="prazoExecucao">Prazo de Execução:</label>
        <input id="prazoExecucao" type="text" formControlName="prazoExecucao" />

        <label for="valorTotal">Valor Total:</label>
        <input id="valorTotal" type="number" formControlName="valorTotal" />

        <label for="validade">Validade:</label>
        <input id="validade" type="date" formControlName="validade" />

        <label for="status">Status:</label>
        <input id="status" type="text" formControlName="status" />
      </fieldset>
    </div>

    <!-- Coluna Direita -->
    <div class="coluna-direita">
      <fieldset>
        <legend>Conteúdo da Proposta</legend>

        <label for="escopoDetalhado">Escopo Detalhado:</label>
        <textarea id="escopoDetalhado" formControlName="escopoDetalhado" rows="6"></textarea>

        <label for="condicoesExclusao">Condições de Exclusão:</label>
        <textarea id="condicoesExclusao" formControlName="condicoesExclusao" rows="4"></textarea>

        <label for="obrigacoesContratada">Obrigações da Contratada:</label>
        <textarea id="obrigacoesContratada" formControlName="obrigacoesContratada" rows="4"></textarea>

        <label for="obrigacoesContratante">Obrigações da Contratante:</label>
        <textarea id="obrigacoesContratante" formControlName="obrigacoesContratante" rows="4"></textarea>

        <label for="condicoesPagamento">Condições de Pagamento:</label>
        <textarea id="condicoesPagamento" formControlName="condicoesPagamento" rows="4"></textarea>
      </fieldset>
    </div>
  </div>

  <div class="botoes">
    <button type="submit" [disabled]="propostaForm.invalid">
      {{ propostaEmEdicao ? 'Atualizar' : 'Salvar' }}
    </button>
    <button type="button" (click)="cancelarEdicao()" *ngIf="propostaEmEdicao">Cancelar</button>
    <button type="button" (click)="limparFormulario()" *ngIf="!propostaEmEdicao">Limpar</button>

    <!-- Link para relatório -->
    <a
      *ngIf="propostaEmEdicao"
      class="relatorio-link"
      [routerLink]="['/relatorios', propostaEmEdicao.id]"
    >
      Ver Relatório
    </a>
  </div>
</form>



